---
title: "Data viz"
author: "Sarah Bisgaard Olesen"
date: "17/6/2021"
output: html_document
---

```{r setup}
#Load packages
source(here::here("R/package_loading.R"))

#load the tidied dataset 
load(here::here("data/nhanes_small.rda"))

```

# One variable plots

```{r continuous-variables}

## Normalvis laves der kun et plot per chunk, men dette kan fungere lidt som en "kogebog"

# Create density plot for BMI
ggplot(nhanes_small, aes(x = bmi)) +         #aes er, hvad der skal plottes
    geom_density()                           #typen af plot


# Create histogram for BMI
ggplot(nhanes_small, aes(x = bmi)) +
    geom_histogram()


```


```{r discrete-variables}

# Create count barplot for sex
ggplot(nhanes_small, aes(x = sex)) +
    geom_bar()

# Create count barplot for diabetes
ggplot(nhanes_small, aes(x = diabetes)) +
    geom_bar()

```

```{r remove-missing-diabetes}

# Create count barplot for diabetes without NA
nhanes_tidied <- nhanes_small %>% 
    filter(!is.na(diabetes))

# Save as
usethis::use_data(nhanes_tidied, overwrite = TRUE)


# Create count barplot for diabetes without NA
ggplot(nhanes_tidied, aes(x = diabetes)) +
    geom_bar()

```

# Plotting two variables

```{r 2-continuous-variables}
bmi_chol <- ggplot(nhanes_tidied, aes(x = bmi, y = tot_chol))

bmi_chol +
    geom_point()

bmi_chol +
    geom_hex()

bmi_chol +
    geom_smooth()

bmi_chol +
    geom_hex() +
    geom_smooth()
    
```

```{r 2-discrete-variables}

two_discrete <- nhanes_tidied %>% 
    ggplot(aes(x = diabetes, fill = sex))

two_discrete +
    geom_bar()

# "dodged" (side-by-side) bar plot
two_discrete +
    geom_bar(position = position_dodge())

```

```{r discrete-continuous-variables}

two_mixed <- nhanes_tidied %>% 
    ggplot(aes(x = diabetes, y = bmi))

two_mixed +
    geom_boxplot()

two_mixed +
    geom_jitter()

two_mixed +
    geom_violin()

```

